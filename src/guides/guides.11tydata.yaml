---
procedureFactoryReset:
  title: Resetting the device
  steps:
    - title: Remove the device from Home Assistant
      image: voice_delete_integration_instance.png
      content: |
        <ul>
          <li>In the Home Assistant documentation, follow the steps on <a href="https://www.home-assistant.io/common-tasks/general/#removing-an-integration-instance" target="_blank">removing an integration instance</a>.</li>
        </ul>
    - title: Press the button until it lights up red (22 seconds)
      image: voice_factory_reset.webp
      content: |
        <ul>
          <li>Keep pressing the button until the red light is turned off.</li>
          <li><b>Result</b>: Once the light turns off, the reset is complete. All data is cleared from the device.</li>
          <li><b>Info</b>: If you stop pressing the button before the red light has completed the circle, the reset process is aborted.</li>
          <li><b>Info</b>: After the reset is complete, the device should start up again and show a white twinkle, indicating that it is ready to be connected. If the device does not seem to be starting back up, power-cycle it.</li>
        </ul>
procedureVolumeControl:
  title: Changing the volume of the device
  steps:
    - title: Move the dial
      image: voice_change_volume.webp
      content: |
        <ul>
          <li>To change the volume, move the dial.</li>
          <li><b>Result</b>: the light shows if you are turning the volume up or down.
            <ul>
              <li>A fully illuminated LED ring indicates the maximum volume.</li>
              <li>If the LED closest to the speaker is red, the volume is set to 0.</li>
          </li>
        </ul>
procedureMute:
  title: Muting the device
  steps:
    - title: Option 1 - Use the hardware mute switch
      image: voice_mute_device.webp
      content: |
        <ul>
          <li>On the device, move the switch so that you see the red color.</li>
          <li><b>Result</b>:  The light turns red, indicating that the microphone is muted.</li>
          <li><b>Info</b>:  When the switch is in this position, you cannot unmute the device from the UI.</li>
        </ul>
    - title: Option 2 - Use the software mute button
      image: voice_mute.png
      content: |
        <ul>
          <li>To use the mute function in the UI, under <b>Configuration</b>, toggle the <b>Mute</b> switch.</li>
          <li><b>Info</b>:  The switch in the UI does not work when the physical switch is in the muted position.</li>
        </ul>
    - title: Red LED indicates the mute status
      image: status_muted.png
      content: |
        <ul>
          <li>If you muted the device, the LEDs closest to the speaker turn red to indicate that the microphones are off.</li>
        </ul>
procedureWakeSoundToggle:
  title: Turning the wake sound on or off
  steps:
    - title: Toggle the wake sound switch
      image: voice_wake_sound.png
      content: |
        <ul>
          <li>Under <b>Configuration</b>, toggle the wake sound switch.</li>
        </ul>
procedureStop:
  title: Stopping the current process
  steps:
    - title: Option 1 - Press the center button
      image: voice_authorize.png
      content: |
        <ul>
          <li>To stop whatever the device is doing, press the center button.
          <ul>
            <li><b>Result</b>: The device stops the following: 
              <ul>
                <li>Stops the timer.</li>
                <li>Stops giving an answer.</li>
                <li>Stops listening.</li>
                <li>Stops playing music.</li>
              </ul>
            </li>
          </li>
        </ul>
    - title: Option 2 - Say “stop”
      image: voice_say_stop.png
      content: |
        <ul>
          <li>To stop the timer or the response, you can say “stop”.</li>
        </ul>
procedureActiveColor:
  title: Changing the active color
  steps:
    - title: Option 1 - Change the active color on the device
      image: voice_change_active_color.webp
      content: |
        <ol>
          <li>Press and hold the button and turn the dial until you see the color you like.</li>
          <li>When you see the color you like, let go of the button.
            <ul>
              <li><b>Result</b>: The device changes the active color.</li>
            </ul>
          </li>
        </ol>
    - title: Option 2 - Change the active color from the UI
      image: voice_change_ring_color_02.png
      content: |
        <ul>
          <li>Under <b>Configuration</b>, select the ring icon and change the color.</li>
        </ul>
procedureWakeWordChange:
  title: Changing the wake word
  steps:
    - title: Open the ESPHome integration page
      image: voice_esphome.png
      content: |
        <ol>
          <li>Go to <a class="my" href="https://my.home-assistant.io/redirect/integrations/" target="_blank"><b>Settings</b> > <b>Devices & services</b></a> and select the <b>ESPHome</b> integration.</li>
          <li>From the list, under <b>Home Assistant Voice</b>, select <b>Device</b>.</li>
        </ol>
    - title: Follow the wizard
      image: voice_change_config.png
      content: |
        <ol>
          <li>Under <b>Device info</b>, select the three dots menu and select <b>Set up voice assistant</b> to start the wizard.</li>
          <li>Follow the steps in the wizard and change the wake word and the assistant as you like.</li>
        </ol>
procedureAutomate:
  title: Using the center button to trigger automations
  steps:
    - title: Create an automation for the button press
      image: voice_button_automations.png
      content: |
        <ul>
          <li>To set up an automation based on a button press pattern (for example, long press), follow the steps on <a href="https://www.home-assistant.io/integrations/event/#automating-on-a-button-press" target="_blank">Automating on a button press</a>.
            <ul>
              <li><b>Info</b>: Those instructions are based on a Matter device. The process is very similar for a voice device.</li>
              </li>
            </ul>
          </li>
        </ul>
    - title: Check out the automation example in YAML.
      image: voice_automation_yaml.png
      content: |
        <ul>
          <li>For inspiration, check out the <a href="https://gist.github.com/jlpouffier/68434e51c8e347e974a791f90914c591" target="_blank">automation example in YAML</a>.</li>
        </ul>
procedureScripts:
  title: Using scripts and automations to control the device
  steps:
    - title: Play announcements on the device
      image: voice_script_announcement.png
      content: |
        <ol>
          <li>You can create an automation or script to play an announcement on the device. 
            <ul>
              <li>Go to <a class="my" href="https://my.home-assistant.io/redirect/automations/" target="_blank"><b>Settings</b> > <b>Automations & scripts</b></a> and create a new automation.</li>
              <li>Define your trigger.</li>                     
              <li>Under <b>Then do</b>, select <b>Add action</b> and from the menu, select <b>Assist satellite</b>.</li>
              <li>Select <b>Announce</b></li>
              <li>Enter the message you want to play and select the device you want to play it on.</li>
              <li>Save the automation.</li>
            </ul>
          </li>
          <li>If you prefer editing in YAML, you can find an example with the <code>assist_satellite.announce action</code> below.           
              <code><pre>
                action: assist_satellite.announce
                  data:
                    message: The laundry is done
                  target:
                    entity_id: assist_satellite.home_assistant_voice_012345</pre>
              </code>
          </li>
        </ol>
    - title: Control the color of the LED ring
      image: voice_light_turn_on_script.png
      content: |
        <ul>
          <li>You can use <code>light.turn_on</code> and <code>light.turn_off</code> actions to control the light. You can turn it on or off when something happens and define color and effects.           
              <code>
                <pre>
                  action: light.turn_on
                    data:
                      rgb_color:
                        - 255
                        - 105
                        - 180
                    target:
                      entity_id: light.home_assistant_voice_012345_led_ring
                  action: light.turn_off
                  target:
                    entity_id: light.home_assistant_voice_012345_led_ring
                </pre>
              </code>
          </li>
        </ul>
    - title: Change the selected assistant
      image: voice_select_assistant_spanish.png
      content: |
        <ol>
          <li>To select a different assistant when something happens, use the <code>select.select_option</code> actions. For example, when a button is pressed.           
              <code>
                <pre>
                  action: select.select_option
                    data:
                      option: preferred
                    target:
                      entity_id: select.home_assistant_voice_012345_assist_pipeline
                </pre>
              </code>
          </li>
          <li>Under <b>Options</b>, enter the name of the voice assistant. Make sure to spell it exactly as you named it. For example <code>Spanish</code>.</li>
          <li>To learn how to set up an automation based on a button press, follow the steps on <a href="https://www.home-assistant.io/integrations/event/#automating-on-a-button-press" target="_blank">Automating on a button press</a>.
            <ul>
              <li><b>Info</b>: Those instructions are based on a Matter device. The process is very similar for other devices featuring a button.</li>
        </ol>
    - title: Change the wake word
      image: voice_select_wake_word_mycroft.png
      content: |
        <ul>
          <li>You can use <code>select.select_option</code> actions to select a different wake word when something happens.           
              <code>
                <pre>
                  action: select.select_option
                    data:
                      option: Okay Nabu
                    target:
                      entity_id: select.home_assistant_voice_012345_wake_word
                </pre>
              </code>
          </li>
          <li>Under <b>Options</b>, enter the preferred wake word. The default options are , <code>Hey Jarvis</code>, <code>Hey Mycroft</code>, and <code>Okay Nabu</code>.</li>
          <li>Make sure to spell it exactly as you named it.</li>
        </ul>
procedureConnectGrovePort:
  title: Connecting a sensor to the grove port
  steps:
    - title: Take control of the device in the ESPHome add-on
      image: voice_esphome_take_control.png
      content: |
        <ol>
          <li>Go to <a class="my" href="https://my.home-assistant.io/redirect/supervisor_addon/?addon=5c53de3b_esphome" target="_blank"><b>Settings</b> > <b>Add-ons</b></a> and install the <b>ESPHome</b> add-on.</li>
          <li>Start the add-on and select <b>Open web UI</b>.</li>
          <li>On the Home Assistant Voice card, select <b>Take control</b>, and follow the steps of the installer.</li>
        </ol>
    - title: Install a new device configuration
      image: voice_esphome_device_config.png
      content: |
        <ol>
          <li>To open the device configuration file, on the Home Assistant Voice card, select <b>Edit</b>.</li>
          <li>In the configuration file, under <code>packages</code>, add the configuration for the sensor.
          <ul>
          <li>In this example, we are adding the configuration for the <a href="https://shop.m5stack.com/products/env-iv-unit-with-temperature-humidity-air-pressure-sensor-sht40-bmp280"
          target="_blank">M5Stack SHT40-BMP280 temperature, humidity, air pressure sensor</a>.
          
                      
          <code>
            <pre>
              packages:
                grove-i2c: github://esphome/home-assistant-voice-pe/modules/grove-i2c.yaml
              sensor:
                - platform: sht4x
                  i2c_id: grove_i2c
                  temperature:
                    name: Temperature
                  humidity:
                    name: Humidity

                - platform: bmp280_i2c
                  i2c_id: grove_i2c
                  address: 0x76
                  pressure:
                    name: Pressure
            </pre>
          </code>
          </li>
          <li>For other sensors, refer to the section on <a class="my" href="/guides/grove_port/#configuration-data-for-selected-sensors" target="_blank">Configuration data for selected sensors</a>.</li></ul></li>
          <li>Now, you need to recompile the firmware with the new configuration settings. To start the process, select <b>Install</b>.</li>
          <li>Wait for the compilation to complete. Depending on your hardware, this may take a while.</li>
        </ol>
    - title: Connect the sensor to the grove port
      image: voice_grove_port_sensor_connected_small.jpg
      content: |
        <ol>
          <li>Disconnect the device from power.</li>
          <li>Connect the sensor to the grove port. 
            <ul>
              <li>Mind the color coding. Make sure the black cable is connected to the ground (GND) pin.</li>
            </ul>
          </li>
          <li>Reconnect the device to the power supply.</li>
        </ol>
    - title: Open the ESPHome integration page
      image: voice_esphome.png
      content: |
        <ol>
          <li>Go to <a class="my" href="https://my.home-assistant.io/redirect/integrations/" target="_blank"><b>Settings</b> > <b>Devices & services</b></a> and select the <b>ESPHome</b> integration.</li>
          <li>From the list, under <b>Home Assistant Voice</b>, select <b>Device</b>.</li>
        </ol>
    - title: View the sensor data
      image: voice_grove_port_sensor_data.png
      content: |
        <ul>
          <li>On the device page, under <b>Sensors</b> you can view the new sensor data.</li>
        </ul>
procedureGrovePortExampleConigurations:
  title: Configuration data for selected sensors
  steps:
    - title: PIR motion sensor
      image: pir_motion_sensor.png
      content: |
        <ul>
          <li>Configuration for the <a href="https://shop.m5stack.com/products/pir-module"
        target="_blank">M5Stack PIR motion sensor</a>.           
              <code><pre>
                packages:
                  grove-power: github://esphome/home-assistant-voice-pe/modules/grove-power.yaml
                binary_sensor:
                  - platform: gpio
                    pin:
                      number: 2
                    name: Motion
                    device_class: motion
                </pre>
              </code>
          </li>
        </ul>
    - title: SGP30 TVOC, eCO2 gas sensor
      image: voice_gas_sensor.png
      content: |
        <ul>
          <li>Configuration for the <a href="https://shop.m5stack.com/products/tvoc-eco2-gas-unit-sgp30"
        target="_blank">M5Stack SGP30 TVOC, eCO2 gas sensor</a>.           
              <code><pre>
                packages:
                  grove-i2c: github://esphome/home-assistant-voice-pe/modules/grove-i2c.yaml
                sensor
                  - platform: sgp30
                    i2c_id: grove_i2c
                    tvoc:
                      name: "TVOC"
                    eco2:
                      name: "eCO2"
                </pre>
              </code>
          </li>
        </ul>
    - title: Ambient light sensor
      image: voice_ambient_light_sensor.png
      content: |
        <ul>
          <li>Configuration for the <a href="https://shop.m5stack.com/products/dlight-unit-ambient-light-sensor-bh1750fvi-tr"
        target="_blank">M5Stack BH1750 ambient light sensor</a>.           
              <code><pre>
                packages:
                  grove-i2c: github://esphome/home-assistant-voice-pe/modules/grove-i2c.yaml
                sensor:
                  - platform: bh1750
                    i2c_id: grove_i2c
                    name: "Light Intensity"
                </pre>
              </code>
          </li>
        </ul>
procedureDisassemble:
  title: Disassembling the device enclosure
  steps:
    - title: Remove the rubber pads and screws
      image: 01_remove_pads_small.png
      content: |
        <ol>
          <li>Grab the flathead screwdriver and remove the 4 rubber pads.</li>
          <li>Grab the crosshead screwdriver and unscrew the 4 rear screws.</li>
        </ol>
    - title: Remove the top enclosure
      image: 02_remove_top_enclosure_small.png
      content: |
        <ol>
          <li>Remove the top enclosure.</li>
          <li>If you only want to replace the top cover, your disassembly is done here. Continue with the assembly steps.</li>
        </ol>
    - title: Remove the the PCB screws
      image: 03_remove_pcb_screws_small.png
      content: |
        <ul>
          <li>Unscrew the 4 screws that hold the PCB.</li>
        </ul>
    - title: Remove the mic switch
      image: 04_remove_mic_switch_small.png
      content: |
        <ul>
          <li>Carefully pull on the mic switch and remove it.</li>
        </ul>
    - title: Remove the speaker
      image: 05_remove_speaker_small.png
      content: |
        <ol>
          <li>Unscrew the 2 screws that hold the speaker.</li>
          <li>Store them separately; they are smaller than the ones for the PCB.</li>
          <li>If you only want to replace the top enclosure and the bottom enclosure, your disassembly is done here. Continue with the assembly steps.</li>
        </ol>
    - title: Remove the LED diffuser
      image: 06_remove_led_diffuser_small.png
      content: |
        <ul>
          <li>Use the flat screwdriver and remove the LED diffuser.</li>
        </ul>
    - title: Remove the dial and the center button
      image: 07_unclip_wheel_small.png
      content: |
        <ol>
          <li>To remove the dial and the center button, locate the slot on the rear of the PCB.</li>
          <li>Hold your finger on the center button to ensure the rotary encoder part underneath the button doesn't accidentally disassemble.</li>
          <li>Keep holding the button and gently push the tip of the flat screwdriver through the slot.</li>
          <li>Proceed carefully and don't apply too much force.</li>
        </ol>
    - title: Remove the rubber o-ring
      image: 08_remove_rubber_lug_small.png
      content: |
        <ul>
          <li>Use the flat screwdriver and remove the rubber o-ring.</li>
        </ul>
    - title: All done!
      image: 07_bis_fully_disassembled_small.png
      content: |
        <ol>
          <li>Congratulations! You've disassembled the device enclosure.</li>
          <li>You can now put it back together using your own awesome 3D printed parts.</li>
        </ol>
